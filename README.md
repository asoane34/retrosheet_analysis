# Retrosheet Analysis
This repository contains python scripts that were designed to parse Retrosheet play-by-play files in to game level statistics
for teams and starting pitchers from 1918 (the first year data is available) to 2019. The data was downloaded 
from Retrosheet.org as .EVN files and then parsed using Chadwick (an open source software available via HomeBrew) and 
written to year-level .csv files. The contents are the following:

## event_parser.py
Script parsing yearly .csv files and writing two new .csv files: one containing game level team totals, and the other
containing game level totals for starting pitchers. Transformed over 13 million individual event observations into 
roughly 170000 game observations.

## recursive_selection.py
FeatureSelector object to serve as a jumping off point for feature selection in classification or regression problems.
Given a DataFrame of features and a target array, the user can begin with the full set of features and recursively remove 
__n__ features using either feature importances, colinearity, or both, and at each iteration it will evaluate the new
subset of features based on a user specified metric and continue removing features as long as predictive performance is 
improving. Feature importance and correlation tolerance can be specified by the user, as well as the algorithm (as long as
the algorithm has a scikit-learn wrapper) and unless otherwise specified, the model will train on all available processors 
to decrease training time. Also a method to test random subsets of features if recursive selection is not helpful.

## team_stat_generator.py
One of the challenges with recreating statistics for games that happened 100 years ago is that team statistics are cumulative,
whereas for game level predictive modeling, I was interested in a team stats on a given day: for example, I needed to know the Milwaukee Braves OBPS on July 5th, 1952, not what their team OBPS was for the 1952 season. This script parses the 102 season .csv files generated by the event_parser.py script and using SQL-style queries extracts each team's statistics for a given season on the day the game was played.

## starting_pitchers.py
Tackles the same problem as team_stat_generator.py, but for starting pitchers instead of teams. 

## pool_executor_pitching.py
The starting_pitchers.py script is highly CPU intensive as it is iterating over and performing dozens of calculations for each of 170000 games, so I adapted the script to take advantage of multi-processing via concurrent.futures module.

## double_headers.py
Short script to add a feature about whether or not a game was game 2 of a doubleheader of game 3 of a tripleheader (this was only the case once). It was necessary to add this as a merge key because on days with doubleheaders, the previous merge keys of date, home team, and road team were not unique. 
